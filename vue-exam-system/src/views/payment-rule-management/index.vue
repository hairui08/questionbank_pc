<template>
  <AppLayout title="é¢˜åº“ç³»ç»Ÿæ”¶è´¹è§„åˆ™ç®¡ç†">
    <TabNavigation :tabs="tabs" :default-tab="'prototype'">
      <!-- åŸå‹å±•ç¤ºæ ‡ç­¾é¡µ -->
      <template #prototype>
        <div class="tab-panel">
          <div class="prototype-wrapper">
            <RuleTemplateTable
              @edit-template="openEditModal"
              @toggle-status="handleToggleStatus"
            />
          </div>
        </div>
      </template>

      <!-- éœ€æ±‚æ–‡æ¡£æ ‡ç­¾é¡µ -->
      <template #requirements>
        <div class="tab-panel">
          <div class="requirements-header">
            <h2>æ”¶è´¹è§„åˆ™ç®¡ç†éœ€æ±‚æ–‡æ¡£</h2>
            <p>ç®¡ç†æ”¶è´¹ä¸æƒé™æ”¶è´¹è§„åˆ™,æ”¯æŒå¯ç”¨/ç¦ç”¨å’Œæ’åº,ä¸ºè¯•é¢˜ã€è¯•å·ã€ç« èŠ‚ç­‰å†…å®¹æä¾›ç»Ÿä¸€çš„è®¿é—®æ§åˆ¶è§„åˆ™ã€‚</p>
          </div>

          <div class="requirements-content">
            <section class="business-requirements">
              <h3>ä¸šåŠ¡éœ€æ±‚</h3>
              <div class="requirement-section">
                <h4>æ ¸å¿ƒç›®æ ‡</h4>
                <ul>
                  <li>æä¾›10æ¡é¢„è®¾çš„æ”¶è´¹æ”¶è´¹è§„åˆ™,æ”¯æŒå…è´¹ã€ä¼šå‘˜ã€é€šç¥¨ã€é™æ—¶ç­‰å¤šç§è®¿é—®æ§åˆ¶æ–¹å¼</li>
                  <li>æ”¯æŒæ¨¡æ¿çš„å¯ç”¨/ç¦ç”¨å’Œæ’åºç®¡ç†,å½±å“ä¸‹æ‹‰é€‰é¡¹çš„æ˜¾ç¤ºé¡ºåº</li>
                  <li>ç¡®ä¿æ”¶è´¹è§„åˆ™ä¸å†…å®¹å®ä½“(è¯•é¢˜/è¯•å·/ç« èŠ‚/ç§‘ç›®)çš„æ­£ç¡®å…³è”</li>
                  <li>æä¾›æ¸…æ™°çš„å‚æ•°è¯´æ˜å’Œé€‚ç”¨å¯¹è±¡æ ‡æ³¨</li>
                </ul>
              </div>

              <div class="requirement-section">
                <h4>ç”¨æˆ·åœºæ™¯</h4>
                <ul>
                  <li><strong>æŸ¥çœ‹æ”¶è´¹è§„åˆ™</strong>: ç®¡ç†å‘˜æŸ¥çœ‹ç³»ç»Ÿé¢„è®¾çš„10æ¡æ”¶è´¹è§„åˆ™,äº†è§£æ¯ä¸ªæ¨¡æ¿çš„é€‚ç”¨å¯¹è±¡å’Œå‚æ•°è¦æ±‚</li>
                  <li><strong>å¯ç”¨/ç¦ç”¨æ¨¡æ¿</strong>: æ ¹æ®ä¸šåŠ¡éœ€è¦,å¯ç”¨æˆ–ç¦ç”¨ç‰¹å®šè§„åˆ™(å¦‚ç¦ç”¨"å­¦ç§‘VIP"è§„åˆ™),å·²ç¦ç”¨çš„è§„åˆ™ä¸ä¼šå‡ºç°åœ¨ç¼–è¾‘é¡µé¢çš„ä¸‹æ‹‰é€‰é¡¹ä¸­</li>
                  <li><strong>è°ƒæ•´æ˜¾ç¤ºé¡ºåº</strong>: é€šè¿‡æ’åºå€¼è°ƒæ•´è§„åˆ™åœ¨ä¸‹æ‹‰åˆ—è¡¨ä¸­çš„æ˜¾ç¤ºé¡ºåº,å¸¸ç”¨è§„åˆ™æ’åœ¨å‰é¢</li>
                  <li><strong>ç†è§£è§„åˆ™å«ä¹‰</strong>: é€šè¿‡"è¯´æ˜"åˆ—å’Œ"å‚æ•°å ä½"åˆ—,å¿«é€Ÿç†è§£æ¯ä¸ªè§„åˆ™çš„ä½œç”¨å’Œæ‰€éœ€å‚æ•°</li>
                </ul>
              </div>

              <div class="requirement-section">
                <h4>ä¸šåŠ¡è§„åˆ™</h4>
                <ul>
                  <li><strong>å›ºå®šæ¨¡æ¿æ•°é‡</strong>: ç³»ç»Ÿé¢„è®¾10æ¡æ”¶è´¹è§„åˆ™(T001-T010),ä¸æ”¯æŒæ–°å¢æˆ–åˆ é™¤æ¨¡æ¿</li>
                  <li><strong>ç¼–ç å”¯ä¸€æ€§</strong>: æ¯ä¸ªæ¨¡æ¿ç¼–ç (å¦‚T001ã€T002)å…¨å±€å”¯ä¸€ä¸”ä¸å¯ä¿®æ”¹</li>
                  <li><strong>å¯ç”¨çŠ¶æ€å½±å“</strong>: ç¦ç”¨çš„æ¨¡æ¿ä¸ä¼šå‡ºç°åœ¨å†…å®¹ç¼–è¾‘é¡µé¢çš„è§„åˆ™ä¸‹æ‹‰é€‰é¡¹ä¸­,ä½†å·²è®¾ç½®è¯¥è§„åˆ™çš„å†…å®¹ä»ä¿ç•™è§„åˆ™</li>
                  <li><strong>æ’åºè§„åˆ™</strong>: æ’åºå€¼è¶Šå¤§,åœ¨ä¸‹æ‹‰é€‰é¡¹ä¸­è¶Šé å‰;é»˜è®¤å€¼ä¸º10-100çš„å€æ•°</li>
                  <li><strong>é€‚ç”¨å¯¹è±¡è¿‡æ»¤</strong>: æ¯ä¸ªæ¨¡æ¿æ ‡æ³¨é€‚ç”¨å¯¹è±¡(è¯•é¢˜/è¯•å·/ç« èŠ‚/ç§‘ç›®),ç¼–è¾‘é¡µé¢è‡ªåŠ¨è¿‡æ»¤ä¸é€‚ç”¨çš„æ¨¡æ¿</li>
                  <li><strong>åªè¯»å­—æ®µ</strong>: æ¨¡æ¿ç¼–ç ã€æ˜¾ç¤ºåç§°ã€é€‚ç”¨å¯¹è±¡ã€å‚æ•°å ä½ç¬¦ã€è¯´æ˜å‡ä¸ºåªè¯»,ä»…æ”¯æŒä¿®æ”¹å¯ç”¨çŠ¶æ€å’Œæ’åº</li>
                </ul>
              </div>
            </section>

            <section class="functional-requirements">
              <h3>åŠŸèƒ½è§„æ ¼</h3>

              <table class="spec-table">
                <thead>
                  <tr>
                    <th width="15%">åŠŸèƒ½é¡¹</th>
                    <th width="40%">åŠŸèƒ½æè¿°</th>
                    <th width="35%">äº¤äº’è§„åˆ™</th>
                    <th width="10%">ä¼˜å…ˆçº§</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>æ¨¡æ¿åˆ—è¡¨</td>
                    <td>è¡¨æ ¼å±•ç¤ºæ‰€æœ‰10æ¡æ”¶è´¹è§„åˆ™</td>
                    <td>åŒ…å«ç¼–ç ã€åç§°ã€é€‚ç”¨å¯¹è±¡ã€å‚æ•°å ä½ã€å¯ç”¨çŠ¶æ€ã€è¯´æ˜ã€æ’åºã€æ“ä½œåˆ—,é»˜è®¤æŒ‰æ’åºå€¼é™åºæ˜¾ç¤º</td>
                    <td>P0</td>
                  </tr>
                  <tr>
                    <td>å¯ç”¨/ç¦ç”¨</td>
                    <td>åˆ‡æ¢æ¨¡æ¿çš„å¯ç”¨çŠ¶æ€</td>
                    <td>ç‚¹å‡»"å¯ç”¨/ç¦ç”¨"æŒ‰é’®å³æ—¶åˆ‡æ¢,å·²ç¦ç”¨çš„æ¨¡æ¿ä¸åœ¨ç¼–è¾‘é¡µä¸‹æ‹‰é€‰é¡¹ä¸­æ˜¾ç¤º</td>
                    <td>P0</td>
                  </tr>
                  <tr>
                    <td>ç¼–è¾‘æ’åº</td>
                    <td>ä¿®æ”¹æ¨¡æ¿çš„æ’åºå€¼</td>
                    <td>ç‚¹å‡»"ç¼–è¾‘"æŒ‰é’®æ‰“å¼€å¼¹çª—,ä»…å¯ä¿®æ”¹æ’åºå€¼,ä¿å­˜ååˆ—è¡¨è‡ªåŠ¨é‡æ–°æ’åº</td>
                    <td>P0</td>
                  </tr>
                  <tr>
                    <td>çŠ¶æ€æ ‡è¯†</td>
                    <td>ç›´è§‚æ˜¾ç¤ºå¯ç”¨/ç¦ç”¨çŠ¶æ€</td>
                    <td>å¯ç”¨çŠ¶æ€æ˜¾ç¤ºç»¿è‰²æ ‡ç­¾,ç¦ç”¨çŠ¶æ€æ˜¾ç¤ºç°è‰²æ ‡ç­¾</td>
                    <td>P1</td>
                  </tr>
                  <tr>
                    <td>é€‚ç”¨å¯¹è±¡æ ‡ç­¾</td>
                    <td>æ˜¾ç¤ºæ¨¡æ¿é€‚ç”¨çš„å¯¹è±¡ç±»å‹</td>
                    <td>å¦‚"é¢˜/å·/ç« /ç§‘"è¡¨ç¤ºé€‚ç”¨äºè¯•é¢˜ã€è¯•å·ã€ç« èŠ‚ã€ç§‘ç›®å››ç§å¯¹è±¡</td>
                    <td>P1</td>
                  </tr>
                </tbody>
              </table>

              <h4>æ”¶è´¹è§„åˆ™æ¸…å•</h4>
              <table class="spec-table">
                <thead>
                  <tr>
                    <th width="10%">ç¼–ç </th>
                    <th width="15%">æ˜¾ç¤ºåç§°</th>
                    <th width="20%">é€‚ç”¨å¯¹è±¡</th>
                    <th width="15%">å‚æ•°å ä½</th>
                    <th width="10%">é»˜è®¤çŠ¶æ€</th>
                    <th width="30%">è¯´æ˜</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>T001</td>
                    <td>å…è´¹</td>
                    <td>é¢˜/å·/ç« /ç§‘</td>
                    <td>-</td>
                    <td>å¯ç”¨</td>
                    <td>æ— éœ€ä»»ä½•æƒé™,æ‰€æœ‰ç”¨æˆ·å¯è®¿é—®</td>
                  </tr>
                  <tr>
                    <td>T002</td>
                    <td>ç« èŠ‚é€šç¥¨</td>
                    <td>é¢˜/ç« </td>
                    <td>{CHAPTER}</td>
                    <td>å¯ç”¨</td>
                    <td>éœ€è´­ä¹°æœ¬ç« èŠ‚é€šç¥¨</td>
                  </tr>
                  <tr>
                    <td>T003</td>
                    <td>VIPåŠä»¥ä¸Š</td>
                    <td>é¢˜/å·/ç« /ç§‘</td>
                    <td>{TIER=VIP}</td>
                    <td>å¯ç”¨</td>
                    <td>å…¨ç«™ä¼šå‘˜ç­‰çº§ â‰¥ VIP</td>
                  </tr>
                  <tr>
                    <td>T004</td>
                    <td>SVIPåŠä»¥ä¸Š</td>
                    <td>é¢˜/å·/ç« /ç§‘</td>
                    <td>{TIER=SVIP}</td>
                    <td>å¯ç”¨</td>
                    <td>å…¨ç«™ä¼šå‘˜ç­‰çº§ â‰¥ SVIP</td>
                  </tr>
                  <tr>
                    <td>T005</td>
                    <td>ç« èŠ‚é€šç¥¨ æˆ– VIP</td>
                    <td>é¢˜/ç« </td>
                    <td>{CHAPTER},{VIP}</td>
                    <td>å¯ç”¨</td>
                    <td>æœ¬ç« èŠ‚é€šç¥¨æˆ–VIPä¼šå‘˜ä»»ä¸€æ»¡è¶³</td>
                  </tr>
                  <tr>
                    <td>T006</td>
                    <td>è¯•å·ä¸“å±ç¥¨</td>
                    <td>å·</td>
                    <td>{PAPER}</td>
                    <td>å¯ç”¨</td>
                    <td>è´­ä¹°æœ¬è¯•å·å³å¯ä½œç­”</td>
                  </tr>
                  <tr>
                    <td>T007</td>
                    <td>è¯¾ç¨‹è§†é¢‘ç¥¨</td>
                    <td>(é¢„ç•™)</td>
                    <td>{COURSE}</td>
                    <td>ç¦ç”¨</td>
                    <td>è´­ä¹°æœ¬è¯¾ç¨‹å³å¯è§‚çœ‹(é¢„ç•™)</td>
                  </tr>
                  <tr>
                    <td>T008</td>
                    <td>å­¦ç§‘VIP(å±€éƒ¨)</td>
                    <td>é¢˜/ç« </td>
                    <td>{PROJECT},{SUBJECT}</td>
                    <td>ç¦ç”¨</td>
                    <td>ä»…åœ¨æŸé¡¹ç›®/ç§‘ç›®ä¸‹ â‰¥ VIP(å¯é€‰ä¸Šçº¿)</td>
                  </tr>
                  <tr>
                    <td>T009</td>
                    <td>è¯•çœ‹Né¢˜</td>
                    <td>é¢˜/å·</td>
                    <td>{FREE_TRY=N}</td>
                    <td>å¯ç”¨</td>
                    <td>å¯å…ˆåšNé¢˜,åç»­éœ€æƒé™</td>
                  </tr>
                  <tr>
                    <td>T010</td>
                    <td>é™æ—¶å¼€æ”¾</td>
                    <td>é¢˜/å·/ç« /ç§‘</td>
                    <td>{START},{END}</td>
                    <td>å¯ç”¨</td>
                    <td>åœ¨æ—¶é—´çª—å£å†…å¼€æ”¾</td>
                  </tr>
                </tbody>
              </table>
            </section>

            <section class="data-constraints">
              <h3>å­—æ®µçº¦æŸ</h3>
              <table class="constraint-table">
                <thead>
                  <tr>
                    <th width="20%">å­—æ®µ</th>
                    <th width="15%">ç±»å‹</th>
                    <th width="15%">çº¦æŸ</th>
                    <th width="50%">è¯´æ˜</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>æ¨¡æ¿ç¼–ç </td>
                    <td>String</td>
                    <td>åªè¯»,å…¨å±€å”¯ä¸€</td>
                    <td>æ ¼å¼:T001-T010,ç³»ç»Ÿé¢„è®¾ä¸å¯ä¿®æ”¹</td>
                  </tr>
                  <tr>
                    <td>æ˜¾ç¤ºåç§°</td>
                    <td>String</td>
                    <td>åªè¯»</td>
                    <td>1-20å­—ç¬¦,å¦‚"å…è´¹"ã€"VIPåŠä»¥ä¸Š"</td>
                  </tr>
                  <tr>
                    <td>é€‚ç”¨å¯¹è±¡</td>
                    <td>Array&lt;String&gt;</td>
                    <td>åªè¯»</td>
                    <td>å¯é€‰å€¼:question/exam/chapter/subject,æ ‡æ³¨æ¨¡æ¿å¯ç”¨äºå“ªäº›ç±»å‹çš„å†…å®¹</td>
                  </tr>
                  <tr>
                    <td>å‚æ•°å ä½ç¬¦</td>
                    <td>String</td>
                    <td>åªè¯»</td>
                    <td>å¦‚"{CHAPTER}"ã€"{FREE_TRY=N}",ç”¨äºè¯´æ˜æ‰€éœ€å‚æ•°</td>
                  </tr>
                  <tr>
                    <td>è¯´æ˜</td>
                    <td>String</td>
                    <td>åªè¯»</td>
                    <td>1-200å­—ç¬¦,äººç±»å¯è¯»çš„è§„åˆ™è¯´æ˜</td>
                  </tr>
                  <tr>
                    <td>å¯ç”¨çŠ¶æ€</td>
                    <td>Enum</td>
                    <td>active/disabled</td>
                    <td>å¯ç¼–è¾‘,ç¦ç”¨åä¸åœ¨ä¸‹æ‹‰é€‰é¡¹ä¸­æ˜¾ç¤º</td>
                  </tr>
                  <tr>
                    <td>æ’åºå€¼</td>
                    <td>Number</td>
                    <td>1-999,æ­£æ•´æ•°</td>
                    <td>å¯ç¼–è¾‘,å€¼è¶Šå¤§è¶Šé å‰,é»˜è®¤10-100</td>
                  </tr>
                </tbody>
              </table>
            </section>

            <section class="acceptance-criteria">
              <h3>éªŒæ”¶æ ‡å‡†</h3>
              <table class="acceptance-criteria">
                <thead>
                  <tr>
                    <th width="5%">#</th>
                    <th width="30%">æµ‹è¯•åœºæ™¯</th>
                    <th width="35%">æ“ä½œæ­¥éª¤</th>
                    <th width="30%">é¢„æœŸç»“æœ</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>1</td>
                    <td>æŸ¥çœ‹æ¨¡æ¿åˆ—è¡¨</td>
                    <td>æ‰“å¼€æ”¶è´¹è§„åˆ™ç®¡ç†é¡µé¢</td>
                    <td>æ˜¾ç¤º10æ¡æ”¶è´¹è§„åˆ™,æŒ‰æ’åºå€¼é™åºæ’åˆ—,åŒ…å«æ‰€æœ‰å¿…è¦å­—æ®µ</td>
                  </tr>
                  <tr>
                    <td>2</td>
                    <td>ç¦ç”¨æ¨¡æ¿</td>
                    <td>ç‚¹å‡»"å­¦ç§‘VIP"è§„åˆ™çš„"ç¦ç”¨"æŒ‰é’®</td>
                    <td>çŠ¶æ€æ ‡ç­¾å˜ä¸ºç°è‰²"ç¦ç”¨",è¯•é¢˜ç¼–è¾‘é¡µçš„è§„åˆ™ä¸‹æ‹‰é€‰é¡¹ä¸­ä¸å†æ˜¾ç¤ºè¯¥è§„åˆ™</td>
                  </tr>
                  <tr>
                    <td>3</td>
                    <td>å¯ç”¨æ¨¡æ¿</td>
                    <td>ç‚¹å‡»å·²ç¦ç”¨è§„åˆ™çš„"å¯ç”¨"æŒ‰é’®</td>
                    <td>çŠ¶æ€æ ‡ç­¾å˜ä¸ºç»¿è‰²"å¯ç”¨",è¯•é¢˜ç¼–è¾‘é¡µçš„è§„åˆ™ä¸‹æ‹‰é€‰é¡¹ä¸­é‡æ–°æ˜¾ç¤ºè¯¥è§„åˆ™</td>
                  </tr>
                  <tr>
                    <td>4</td>
                    <td>ä¿®æ”¹æ’åº</td>
                    <td>ç¼–è¾‘"å…è´¹"è§„åˆ™,å°†æ’åºå€¼ä»100æ”¹ä¸º50,ä¿å­˜</td>
                    <td>åˆ—è¡¨è‡ªåŠ¨é‡æ–°æ’åº,"å…è´¹"è§„åˆ™çš„æ˜¾ç¤ºä½ç½®å‘ç”Ÿå˜åŒ–</td>
                  </tr>
                  <tr>
                    <td>5</td>
                    <td>åªè¯»å­—æ®µä¿æŠ¤</td>
                    <td>å°è¯•ç¼–è¾‘æ¨¡æ¿çš„æ˜¾ç¤ºåç§°æˆ–é€‚ç”¨å¯¹è±¡</td>
                    <td>ç¼–è¾‘å¼¹çª—ä¸­è¿™äº›å­—æ®µä¸ºåªè¯»çŠ¶æ€æˆ–ä¸å¯ç¼–è¾‘</td>
                  </tr>
                  <tr>
                    <td>6</td>
                    <td>çŠ¶æ€æŒä¹…åŒ–</td>
                    <td>ç¦ç”¨ä¸€ä¸ªè§„åˆ™å,åˆ·æ–°é¡µé¢</td>
                    <td>è§„åˆ™çš„ç¦ç”¨çŠ¶æ€ä¿æŒ,ä¸ä¼šæ¢å¤ä¸ºå¯ç”¨</td>
                  </tr>
                </tbody>
              </table>
            </section>
          </div>
        </div>
      </template>

      <!-- æ ·å¼æŒ‡å—æ ‡ç­¾é¡µ -->
      <template #style-guide>
        <div class="tab-panel">
          <div class="style-guide-header">
            <h2>æŸ¥çœ‹å®Œæ•´è®¾è®¡è§„èŒƒ</h2>
            <p>å®Œæ•´çš„è®¾è®¡ç³»ç»Ÿã€ç»„ä»¶åº“å’Œæ ·å¼æŒ‡å—å·²ç»Ÿä¸€æ•´åˆåˆ°è®¾è®¡è§„èŒƒé¡µé¢ï¼Œç¡®ä¿å…¨ç«™è§†è§‰ä¸€è‡´æ€§ã€‚</p>
            <router-link to="/design-guidelines" class="view-guidelines-btn">
              å‰å¾€è®¾è®¡è§„èŒƒé¡µé¢ â†’
            </router-link>
          </div>
        </div>
      </template>
    </TabNavigation>

    <!-- ç¼–è¾‘å¼¹çª— -->
    <EditRuleTemplateModal
      v-if="editModalVisible"
      :visible="editModalVisible"
      :template="currentTemplate"
      @update:visible="editModalVisible = $event"
      @submit="handleEditTemplate"
    />

    <!-- Toast æç¤º -->
    <Toast :visible="toastVisible" :message="toastMessage" :type="toastType" />
  </AppLayout>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import { usePaymentRuleStore } from '@/stores/paymentRule'
import { useToast } from '@/composables/useToast'
import type { PaymentRule } from '@/views/payment-rule-management/types'
import AppLayout from '@/components/Layout/AppLayout.vue'
import TabNavigation from '@/components/Tab/TabNavigation.vue'
import RuleTemplateTable from './components/RuleTemplateTable.vue'
import EditRuleTemplateModal from './components/EditRuleTemplateModal.vue'
import Toast from '@/components/Feedback/Toast.vue'

const ruleStore = usePaymentRuleStore()
const { toastVisible, toastMessage, toastType, showToast } = useToast()

const tabs = [
  { key: 'prototype', label: 'åŸå‹å±•ç¤º', icon: 'ğŸ¨' },
  { key: 'requirements', label: 'éœ€æ±‚æ–‡æ¡£', icon: 'ğŸ“‹' },
  { key: 'style-guide', label: 'æ ·å¼æŒ‡å—', icon: 'ğŸ¯' }
]

// ç¼–è¾‘å¼¹çª—ç›¸å…³
const editModalVisible = ref(false)
const currentTemplate = ref<PaymentRule | null>(null)

/**
 * æ‰“å¼€ç¼–è¾‘å¼¹çª—
 */
function openEditModal(template: PaymentRule) {
  currentTemplate.value = template
  editModalVisible.value = true
}

/**
 * å¤„ç†ç¼–è¾‘æ¨¡æ¿
 */
function handleEditTemplate(data: { order: number }) {
  try {
    if (!currentTemplate.value) return

    ruleStore.updateRuleOrder(currentTemplate.value.id, data.order)
    showToast('æ’åºæ›´æ–°æˆåŠŸ')
    editModalVisible.value = false
  } catch (error) {
    showToast(error instanceof Error ? error.message : 'æ’åºæ›´æ–°å¤±è´¥', { type: 'error' })
  }
}

/**
 * å¤„ç†åˆ‡æ¢çŠ¶æ€
 */
function handleToggleStatus(template: PaymentRule) {
  try {
    ruleStore.toggleRuleStatus(template.id)
    const newStatus = template.status === 'active' ? 'ç¦ç”¨' : 'å¯ç”¨'
    showToast(`å·²${newStatus}æ”¶è´¹è§„åˆ™`)
  } catch (error) {
    showToast(error instanceof Error ? error.message : 'çŠ¶æ€åˆ‡æ¢å¤±è´¥', { type: 'error' })
  }
}
</script>

<style scoped>
.tab-panel {
  padding: 24px;
  background-color: var(--panel-bg);
  min-height: calc(100vh - 120px);
}

.prototype-wrapper {
  max-width: 1400px;
  margin: 0 auto;
}

/* éœ€æ±‚æ–‡æ¡£æ ·å¼ */
.requirements-header {
  margin-bottom: 32px;
  padding-bottom: 16px;
  border-bottom: 2px solid var(--panel-border);
}

.requirements-header h2 {
  color: var(--primary-text);
  font-size: 28px;
  margin-bottom: 8px;
}

.requirements-header p {
  color: var(--secondary-text);
  font-size: 16px;
  line-height: 1.6;
}

.requirements-content {
  max-width: 1200px;
}

.requirements-content section {
  margin-bottom: 48px;
}

.requirements-content h3 {
  color: var(--primary-text);
  font-size: 24px;
  margin-bottom: 24px;
  padding-bottom: 12px;
  border-bottom: 2px solid var(--accent);
}

.requirement-section {
  margin-bottom: 32px;
}

.requirement-section h4 {
  color: var(--primary-text);
  font-size: 18px;
  margin-bottom: 16px;
}

.requirement-section ul {
  list-style: none;
  padding-left: 0;
}

.requirement-section ul li {
  color: var(--secondary-text);
  font-size: 15px;
  line-height: 1.8;
  margin-bottom: 12px;
  padding-left: 24px;
  position: relative;
}

.requirement-section ul li::before {
  content: 'â€¢';
  color: var(--accent);
  font-weight: bold;
  position: absolute;
  left: 8px;
}

.requirement-section ul li strong {
  color: var(--primary-text);
  font-weight: 600;
}

/* è¡¨æ ¼æ ·å¼ */
.spec-table,
.constraint-table {
  width: 100%;
  border-collapse: collapse;
  margin-bottom: 32px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  border-radius: 8px;
  overflow: hidden;
}

.spec-table thead,
.constraint-table thead {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

.spec-table th,
.constraint-table th {
  color: #ffffff;
  font-weight: 600;
  text-align: left;
  padding: 16px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  font-size: 13px;
}

.spec-table tbody tr,
.constraint-table tbody tr {
  border-bottom: 1px solid var(--table-border);
  transition: background-color 0.2s ease;
}

.spec-table tbody tr:hover,
.constraint-table tbody tr:hover {
  background-color: var(--row-hover);
}

.spec-table td,
.constraint-table td {
  padding: 14px 16px;
  color: var(--secondary-text);
  font-size: 14px;
  line-height: 1.6;
}

.acceptance-criteria {
  width: 100%;
  border-collapse: collapse;
  margin-bottom: 32px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  border-radius: 8px;
  overflow: hidden;
}

.acceptance-criteria thead {
  background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
}

.acceptance-criteria th {
  color: #ffffff;
  font-weight: 600;
  text-align: left;
  padding: 16px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  font-size: 13px;
}

.acceptance-criteria tbody tr {
  border-bottom: 1px solid var(--table-border);
  transition: background-color 0.2s ease;
}

.acceptance-criteria tbody tr:hover {
  background-color: var(--row-hover);
}

.acceptance-criteria td {
  padding: 14px 16px;
  color: var(--secondary-text);
  font-size: 14px;
  line-height: 1.6;
}

/* æ ·å¼æŒ‡å—æ ·å¼ */
.style-guide-header {
  text-align: center;
  padding: 80px 24px;
}

.style-guide-header h2 {
  color: var(--primary-text);
  font-size: 32px;
  margin-bottom: 16px;
}

.style-guide-header p {
  color: var(--secondary-text);
  font-size: 18px;
  margin-bottom: 32px;
  max-width: 600px;
  margin-left: auto;
  margin-right: auto;
}

.view-guidelines-btn {
  display: inline-block;
  padding: 14px 32px;
  background: linear-gradient(135deg, var(--accent) 0%, var(--accent-hover) 100%);
  color: white;
  text-decoration: none;
  border-radius: 8px;
  font-weight: 600;
  font-size: 16px;
  transition: all 0.3s ease;
  box-shadow: 0 4px 12px rgba(0, 102, 204, 0.3);
}

.view-guidelines-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 16px rgba(0, 102, 204, 0.4);
}
</style>
